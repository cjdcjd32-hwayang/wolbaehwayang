<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Wolbaehwayang</title>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js"></script>
</head>
<body>

<h1>ğŸŒ± Wolbaehwayang</h1>
<p>Firebase Hosting ì—°ê²° í…ŒìŠ¤íŠ¸ ì„±ê³µ</p>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyBau9yukCvYTsahSkjy0JndEk4Docmue1I",
    authDomain: "wolbaehwayang-d1787.firebaseapp.com",
    projectId: "wolbaehwayang-d1787"
  };

  firebase.initializeApp(firebaseConfig);
</script>

</body>
<div id="nicknameBox">
<h2>ë‹‰ë„¤ì„ ì…ë ¥</h2>

<input
  type="text"
  id="nicknameInput"
  placeholder="ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”"
  maxlength="10"
/>

<button id="saveNicknameBtn">ì…ì¥í•˜ê¸°</button>

<p id="statusMsg"></p>
</div>

<script type="module">
const savedNickname = localStorage.getItem("wolbaehwayang_nickname");

if (savedNickname) {
  document.getElementById("nicknameBox").style.display = "none";
  console.log("ìë™ ì…ì¥:", savedNickname);
}

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const savedNickname = localStorage.getItem("wolbaehwayang_nickname");
if (savedNickname) {
  document.getElementById("nicknameBox").style.display = "none";
}

localStorage.setItem("wolbaehwayang_nickname", nickname);
document.getElementById("nicknameBox").style.display = "none";


  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
  import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

  // ğŸ” Firebase ì„¤ì •
  const firebaseConfig = {
    apiKey: "AIzaSyBau9yukCvYTsahSkjy0JndEk4Docmue1I",
    authDomain: "wolbaehwayang-d1787.firebaseapp.com",
    projectId: "wolbaehwayang-d1787"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  console.log("ğŸ”¥ Firebase ì—°ê²° ì™„ë£Œ")

  const input = document.getElementById("nicknameInput");
  const btn = document.getElementById("saveNicknameBtn");
  const msg = document.getElementById("statusMsg");

  btn.addEventListener("click", async () => {
    const nickname = input.value.trim();

    if (!nickname) {
      msg.innerText = "ë‹‰ë„¤ì„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.";
      msg.style.color = "red";
      return;
    }

    try {
      await setDoc(doc(db, "users", nickname), {
        nickname: nickname,
        createdAt: new Date()
      });

      // ğŸ”’ ë¸Œë¼ìš°ì €ì— ì €ì¥ (ë¡œê·¸ì¸ ëŒ€ìš©)
      localStorage.setItem("wolbaehwayang_nickname", nickname);

      msg.innerText = "ì…ì¥ ì™„ë£Œ!";
      msg.style.color = "green";

    } catch (e) {
      msg.innerText = "ì €ì¥ ì‹¤íŒ¨. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.";
      msg.style.color = "red";
      console.error(e);
    }
  });
</script>

<hr>

<h2>ğŸŒ± ì°½ì œ ê¸°ë¡</h2>

<select id="branchSelect">
  <option value="">ì†Œì† ì§€ë¶€ ì„ íƒ</option>
  <option value="ë‹¬ë¹„">ë‹¬ë¹„</option>
  <option value="ìƒì¸">ìƒì¸</option>
  <option value="ì›ë•">ì›ë•</option>
  <option value="ëŒ€ê³¡">ëŒ€ê³¡</option>
  <option value="ì›”ë°°">ì›”ë°°</option>
  <option value="ìœ ì²œ">ìœ ì²œ</option>
  <option value="ì§„ì²œ">ì§„ì²œ</option>
  <option value="ì˜ë‚¨">ì˜ë‚¨</option>
  <option value="ì˜¥í¬">ì˜¥í¬</option>
  <option value="í™”ì›">í™”ì›</option>
</select>

<select id="timeSelect">
  <option value="">ì°½ì œ ì‹œê°„ ì„ íƒ</option>
  <option value="10">10ë¶„</option>
  <option value="30">30ë¶„</option>
  <option value="60">1ì‹œê°„</option>
</select>

<button id="saveChantBtn">ì°½ì œ ê¸°ë¡ ì €ì¥</button>

<p id="chantMsg"></p>


import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

const chantBtn = document.getElementById("saveChantBtn");
const chantMsg = document.getElementById("chantMsg");

chantBtn.addEventListener("click", async () => {
  const nickname = localStorage.getItem("wolbaehwayang_nickname");
  const branch = document.getElementById("branchSelect").value;
  const minutes = document.getElementById("timeSelect").value;

  if (!nickname) {
    chantMsg.innerText = "ë‹‰ë„¤ì„ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤. ìƒˆë¡œê³ ì¹¨ í›„ ë‹¤ì‹œ ì…ë ¥í•´ì£¼ì„¸ìš”.";
    chantMsg.style.color = "red";
    return;
  }

  if (!branch || !minutes) {
    chantMsg.innerText = "ì§€ë¶€ì™€ ì‹œê°„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.";
    chantMsg.style.color = "red";
    return;
  }

  try {
    await addDoc(collection(db, "chants"), {
      nickname: nickname,
      branch: branch,
      minutes: Number(minutes),
      blocks: Number(minutes) / 10, // ğŸ”¥ ì˜¨ë„ê³„ ì¹¸
      createdAt: new Date()
    });

    chantMsg.innerText = "ì°½ì œ ê¸°ë¡ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤ ğŸŒ±";
    chantMsg.style.color = "green";

  } catch (e) {
    chantMsg.innerText = "ì €ì¥ ì‹¤íŒ¨. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.";
    chantMsg.style.color = "red";
    console.error(e);
  }
});



</html>






